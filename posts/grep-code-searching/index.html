<!doctype html><html lang=en><head><title>Grep 命令检索代码 :: theoriz0's blog</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="快速找到其他项目中的代码参考范例。"><meta name=keywords content=","><meta name=robots content="noodp"><link rel=canonical href=https://theoriz0.github.io/posts/grep-code-searching/><script async src="https://www.googletagmanager.com/gtag/js?id=G-8HN1FE064R"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8HN1FE064R",{anonymize_ip:!1})}</script><link rel=stylesheet href=https://theoriz0.github.io/styles.css><link rel="shortcut icon" href=https://theoriz0.github.io/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://theoriz0.github.io/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Grep 命令检索代码"><meta property="og:description" content="快速找到其他项目中的代码参考范例。"><meta property="og:url" content="https://theoriz0.github.io/posts/grep-code-searching/"><meta property="og:site_name" content="theoriz0's blog"><meta property="og:image" content="https://theoriz0.github.io/"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2023-11-15 11:59:46 +0800 +0800"><script async src="https://www.googletagmanager.com/gtag/js?id=G-8HN1FE064R"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8HN1FE064R",{anonymize_ip:!1})}</script></head><body class=orange><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>theoriz0's blog</div></a></div></div></header><div class=content><article class=post><h1 class=post-title><a href=https://theoriz0.github.io/posts/grep-code-searching/>Grep 命令检索代码</a></h1><div class=post-meta><time class=post-date>2023-11-15 ::</time></div><span class=post-tags>#<a href=https://theoriz0.github.io/tags/shell/>Shell</a>&nbsp;
#<a href=https://theoriz0.github.io/tags/></a>&nbsp;</span><div class=table-of-contents><h2>内容大纲</h2><nav id=TableOfContents><ul><li><a href=#grep-常用选项介绍>Grep 常用选项介绍</a></li><li><a href=#递归查找并显示行号>递归查找并显示行号</a></li><li><a href=#限制文件类型或其它条件>限制文件类型或其它条件</a></li><li><a href=#限制目录>限制目录</a></li><li><a href=#匹配整个单词>匹配整个单词</a></li><li><a href=#查看查找结果的上下文>查看查找结果的上下文</a></li><li><a href=#grep-配合-find>grep 配合 find</a></li><li><a href=#参考资料>参考资料</a></li></ul></nav></div><div class=post-content><div><h2 id=grep-常用选项介绍>Grep 常用选项介绍<a href=#grep-常用选项介绍 class=hanchor arialabel=Anchor>&#8983;</a></h2><ul><li><p><code>-r</code>，递归查找</p></li><li><p><code>-n</code>，搜索结果显示行号</p></li><li><p><code>-i</code>，忽略大小写</p></li><li><p><code>-v</code>，反向匹配</p></li><li><p><code>-w</code>，匹配整个单词</p></li><li><p><code>-E</code>，匹配扩展的正则表达式</p></li><li><p><code>-l</code>，只打印匹配的文件名。</p></li></ul><h2 id=递归查找并显示行号>递归查找并显示行号<a href=#递归查找并显示行号 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grep -rn memcpy
</span></span><span style=display:flex><span>grep -rni memcpy <span style=color:#75715e>#忽略大小写</span>
</span></span></code></pre></div><h2 id=限制文件类型或其它条件>限制文件类型或其它条件<a href=#限制文件类型或其它条件 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grep -rn memcpy | grep -v .o.cmd <span style=color:#75715e>#排除.txt文件</span>
</span></span><span style=display:flex><span>grep -rn memcpy | grep -Ev <span style=color:#e6db74>&#39;\.txt\.md|\.log|\.yaml&#39;</span> <span style=color:#75715e>#使用正则表达式排除多种类型</span>
</span></span><span style=display:flex><span>grep -rn --exclude<span style=color:#f92672>=</span>*.txt memcpy <span style=color:#75715e>#不在.txt中搜索</span>
</span></span><span style=display:flex><span>grep -rn --include<span style=color:#f92672>=</span>*.go memcpy <span style=color:#75715e>#只在.go中搜索</span>
</span></span></code></pre></div><h2 id=限制目录>限制目录<a href=#限制目录 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grep -rn --exclude-dir<span style=color:#f92672>=</span>out memcpy
</span></span><span style=display:flex><span>grep -rn --exclude-dir<span style=color:#f92672>=</span>out --exclude-dir<span style=color:#f92672>=</span>doc memcpy
</span></span></code></pre></div><h2 id=匹配整个单词>匹配整个单词<a href=#匹配整个单词 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grep -rnw memcpy
</span></span></code></pre></div><p>如果想过滤<code>zmemcpy</code>或者<code>memcpyl</code>，但是想保留<code>MCD_memcpy</code>, <code>memcpy_16</code>，需要写正则表达式。</p><h2 id=查看查找结果的上下文>查看查找结果的上下文<a href=#查看查找结果的上下文 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grep -rn -B <span style=color:#ae81ff>3</span> -A <span style=color:#ae81ff>2</span> MEMCPY <span style=color:#75715e>#匹配的前三行+后两行</span>
</span></span></code></pre></div><h2 id=grep-配合-find>grep 配合 find<a href=#grep-配合-find class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>find . -iname Makefile -o -iname *.inc -o -iname *.mk | xargs grep -rn CFLAGS
</span></span></code></pre></div><p>管道实现的是将前面的输出stdout作为后面的输入stdin，但是有些命令不接受管道的传递方式。例如：ls，这是为什么呢？因为有些命令希望管道传递过来的是参数，但是直接使用管道有时无法传递到命令的参数位。这时候就需要xargs，xargs实现的是将管道传递过来的stdin进行处理然后传递到命令的参数位置上。</p><h2 id=参考资料>参考资料<a href=#参考资料 class=hanchor arialabel=Anchor>&#8983;</a></h2><p><a href=https://blog.csdn.net/guyongqiangx/article/details/70161189>使用grep搜索代码的几个示例</a></p><p><a href=https://www.jianshu.com/p/676353506f0b>Linux那点事-xargs命令详解</a></p></div></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//theoriz0blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2023 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>