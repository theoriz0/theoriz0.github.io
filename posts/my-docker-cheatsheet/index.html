<!doctype html><html lang=en><head><title>My Docker Cheatsheet :: theoriz0's blog</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="mysql 安装
docker run --name some-mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:latest #tag 见docker hub docker exec -ti some-mysql /bin/bash ## 进入docker镜像 mysql -u root -p 允许任何客户端连接
ALTER USER &amp;#39;root&amp;#39;@&amp;#39;%&amp;#39; IDENTIFIED WITH mysql_native_password BY &amp;#39;123456&amp;#39;; 参考：
redis
docker run -p 6379:6379 --name myredis -d redis:7.0.12 --requirepass my-secret-pw wsl下，会遇到提示port already in use，而并不能查到端口被占用，可以将外部端口改为16379。
查看windows端口占用范围 来源：
netsh interface ipv4 show excludedportrange protocol=tcp 进入redis
docker exec -it myredis bash redis-cli auth my-secret-pw 自动重启 docker run --restart-always"><meta name=keywords content=","><meta name=robots content="noodp"><link rel=canonical href=https://theoriz0.github.io/posts/my-docker-cheatsheet/><script async src="https://www.googletagmanager.com/gtag/js?id=G-8HN1FE064R"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8HN1FE064R",{anonymize_ip:!1})}</script><link rel=stylesheet href=https://theoriz0.github.io/styles.css><link rel="shortcut icon" href=https://theoriz0.github.io/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://theoriz0.github.io/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="My Docker Cheatsheet"><meta property="og:description" content="mysql 安装
docker run --name some-mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:latest #tag 见docker hub docker exec -ti some-mysql /bin/bash ## 进入docker镜像 mysql -u root -p 允许任何客户端连接
ALTER USER &amp;#39;root&amp;#39;@&amp;#39;%&amp;#39; IDENTIFIED WITH mysql_native_password BY &amp;#39;123456&amp;#39;; 参考：
redis
docker run -p 6379:6379 --name myredis -d redis:7.0.12 --requirepass my-secret-pw wsl下，会遇到提示port already in use，而并不能查到端口被占用，可以将外部端口改为16379。
查看windows端口占用范围 来源：
netsh interface ipv4 show excludedportrange protocol=tcp 进入redis
docker exec -it myredis bash redis-cli auth my-secret-pw 自动重启 docker run --restart-always"><meta property="og:url" content="https://theoriz0.github.io/posts/my-docker-cheatsheet/"><meta property="og:site_name" content="theoriz0's blog"><meta property="og:image" content="https://theoriz0.github.io/"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2023-11-09 17:19:34 +0800 +0800"><script async src="https://www.googletagmanager.com/gtag/js?id=G-8HN1FE064R"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8HN1FE064R",{anonymize_ip:!1})}</script></head><body class=orange><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>theoriz0's blog</div></a></div></div></header><div class=content><article class=post><h1 class=post-title><a href=https://theoriz0.github.io/posts/my-docker-cheatsheet/>My Docker Cheatsheet</a></h1><div class=post-meta><time class=post-date>2023-11-09 ::</time></div><span class=post-tags>#<a href=https://theoriz0.github.io/tags/></a>&nbsp;
#<a href=https://theoriz0.github.io/tags/></a>&nbsp;</span><div class=table-of-contents><h2>内容大纲</h2><nav id=TableOfContents><ul><li><a href=#mysql>mysql</a></li><li><a href=#自动重启>自动重启</a></li><li><a href=#查看日志>查看日志</a></li><li><a href=#docker性能损失>Docker性能损失</a></li></ul></nav></div><div class=post-content><div><h2 id=mysql>mysql<a href=#mysql class=hanchor arialabel=Anchor>&#8983;</a></h2><p>安装</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --name some-mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD<span style=color:#f92672>=</span>my-secret-pw -d mysql:latest <span style=color:#75715e>#tag 见docker hub</span>
</span></span><span style=display:flex><span>docker exec -ti some-mysql /bin/bash <span style=color:#75715e>## 进入docker镜像</span>
</span></span><span style=display:flex><span>mysql -u root -p
</span></span></code></pre></div><p>允许任何客户端连接</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;root&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED <span style=color:#66d9ef>WITH</span> mysql_native_password <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;123456&#39;</span>;
</span></span></code></pre></div><p>参考：</p><p><a href=https://zhuanlan.zhihu.com/p/158063202></a></p><p><a href=https://hub.docker.com/_/mysql/></a></p><p>redis</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -p 6379:6379 --name myredis -d redis:7.0.12  --requirepass my-secret-pw
</span></span></code></pre></div><p>wsl下，会遇到提示port already in use，而并不能查到端口被占用，可以将外部端口改为16379。</p><p>查看windows端口占用范围 <a href=https://cloud.tencent.com/developer/article/2006079>来源</a>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>netsh interface ipv4 show excludedportrange protocol<span style=color:#f92672>=</span>tcp
</span></span></code></pre></div><p>进入redis</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker exec -it myredis bash 
</span></span><span style=display:flex><span>redis-cli
</span></span><span style=display:flex><span>auth my-secret-pw
</span></span></code></pre></div><h2 id=自动重启>自动重启<a href=#自动重启 class=hanchor arialabel=Anchor>&#8983;</a></h2><p><code>docker run --restart-always</code></p><h2 id=查看日志>查看日志<a href=#查看日志 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker logs myredis <span style=color:#75715e># 后面跟容器名 or 容器ID 都可以</span>
</span></span><span style=display:flex><span>docker logs --since 30m &lt;容器名&gt; <span style=color:#75715e># --since 30m 是查看此容器30分钟之内的日志情况。</span>
</span></span></code></pre></div><h2 id=docker性能损失>Docker性能损失<a href=#docker性能损失 class=hanchor arialabel=Anchor>&#8983;</a></h2><p><a href=https://www.v2ex.com/t/394313>V2EX讨论</a></p><blockquote><p>CPU 基本不会有损失。</p><p>损失只出现在 I/O 上，包括网络 I/O 和文件系统 I/O。这两者就要看不同的实现了。</p><p>&mldr;&mldr;但是对于 99% 的应用程序来说，根本不需要考虑这个损失……</p></blockquote></div></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//theoriz0blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2023 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>